<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  <link rel="canonical" href="https://github.com/uqembeddedsys-projects/sourcelib-docs/getting_started/blinky/">
  <link rel="shortcut icon" href="../../img/favicon.ico">
  <title>Blinky - sourcelib-docs</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700" />

  <link rel="stylesheet" href="../../css/theme.css" />
  <link rel="stylesheet" href="../../css/theme_extra.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/github.min.css" />
  
  <script>
    // Current page data
    var mkdocs_page_name = "Blinky";
    var mkdocs_page_input_path = "getting_started\\blinky.md";
    var mkdocs_page_url = "/uqembeddedsys-projects/sourcelib-docs/getting_started/blinky/";
  </script>
  
  <script src="../../js/jquery-2.1.1.min.js" defer></script>
  <script src="../../js/modernizr-2.8.3.min.js" defer></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
        <a href="../.." class="icon icon-home"> sourcelib-docs</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../..">Home</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../git/git/">Git</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Setup</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../setup/virtual_machine/virtual_machine/">Virtual Machine</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../setup/linux/linux/">Native Linux Setup Installation</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Getting Started</span></p>
                <ul class="current">
                    <li class="toctree-l1 current"><a class="reference internal current" href="./">Blinky</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#getting_started">Getting Started</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#compiling">Compiling</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#updating_flashing_tools">Updating flashing tools</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#verifying_jlink">Verifying JLink</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#flashing_code">Flashing Code</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#tips_and_troubleshooting">Tips and Troubleshooting</a>
    </li>
    </ul>
                    </li>
                </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../..">sourcelib-docs</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../..">Docs</a> &raquo;</li>
    
      
        
          <li>Getting Started &raquo;</li>
        
      
    
    <li>Blinky</li>
    <li class="wy-breadcrumbs-aside">
      
        <a href="https://github.com/uqembeddedsys-projects/sourcelib-docs/edit/master/docs/getting_started/blinky.md"> Edit on sourcelib-docs</a>
      
    </li>
  </ul>
  
  <hr/>
</div>

          <div role="main">
            <div class="section">
              
                <h3 id="compiling_your_first_app">Compiling your first app</h3>
<h4 id="getting_started">Getting Started</h4>
<p>Navigate to sourcelib -&gt; examples -&gt; getting-started -&gt; blink</p>
<p>Select your platform here, for most people this will be nucleo-f429. If you are an external student, you may have one of the other boards, check it carefully.</p>
<h4 id="compiling">Compiling</h4>
<p>Inside the platform folder, there should be a file called <code>main.c</code> and a file called <code>Makefile</code>. Execute the command:
<code>make</code></p>
<p>All the c files should now start building, when it finishes, there will be a main.bin file, main.elf file, main.hex file, and main.o file, as well as an obj directory.</p>
<h4 id="updating_flashing_tools">Updating flashing tools</h4>
<p>The flashing tools used in this course rely on JLink libraries, JLink is used to communicate with the debugging chip on the board which will then flash the code (amongst doing other things).However the board dy default comes with a different debugging chip, ST-LINK, thus we will need to replace the ST-LINK firmware with JLink firmware. If you are an internal student, this may have already been done for you, and you can try skipping to the next section, external students should read on.</p>
<ul>
<li>Download and install the ST-LINK USB Drivers for Windows <a href="https://www.st.com/en/development-tools/stsw-link009.html">ST-LINK</a>, on your Windows machine (or RDP into UQ if you dont have Windows)</li>
<li>Download and install the latest Windows <a href="https://www.segger.com/downloads/jlink/">JLink-Firmware</a>, on your Windows machine.</li>
<li>Download the ST-Link Reflash Utility from <a href="https://www.segger.com/downloads/jlink/#STLink_Reflash">Segger</a></li>
</ul>
<p>Run the reflasher -&gt; accept -&gt; [1] Upgrade To J-Link -&gt; [0] Quit</p>
<h4 id="verifying_jlink">Verifying JLink</h4>
<p>Inside your VM, make sure the nucleo is attached as a device, verify by using <code>sudo dmesg</code> and looking at the bottom of the log for newly attached devices, as well as looking for /dev/ttyACM0 when the usb is pluged in and the device is attached to the VM. (Note the nucleo cannot be attached both to the VM and to the Host OS, so if its visible in your Host OS, it isnt attached to your VM)</p>
<p>Execute the following</p>
<pre><code>JLinkExe
connect
STM32F429ZI (or other depending on your nucleo)
S
&lt;Enter&gt; (Default)
</code></pre>
<p>There should be some text ending with Cortex-M4 Identified</p>
<pre><code>q (for quit)
</code></pre>
<h4 id="flashing_code">Flashing Code</h4>
<p>Now we are ready to flash, navigate back to the getting started, blinky makefile and execute</p>
<pre><code>make flash
</code></pre>
<p>Accept any popups, the flasher will now cycle through the Compare, Erase, Program, Verify steps, after which the LED's on the Nucleo should start blinking.</p>
<h4 id="tips_and_troubleshooting">Tips and Troubleshooting</h4>
<ul>
<li><code>make clean</code> cleans the compiled binaries, this is not always necessary when recompiling code, since not everything needs to be recompiled, however it is useful when a lot of changes have been made.</li>
<li><code>make -j</code> makes compiling faster by using all allocated cpu cores, note that when using a VM to make full use of this you would need to allocate more CPU cores in the VM settings</li>
<li>if <code>make</code> complains about a <code>.depend</code> target, you open the makefile and change <code>include .depend</code> to <code>-include .depend</code></li>
</ul>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
      
        <a href="../../setup/linux/linux/" class="btn btn-neutral" title="Native Linux Setup Installation"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="../../setup/linux/linux/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
  </span>
</div>
    <script>var base_url = '../..';</script>
    <script src="../../js/theme_extra.js" defer></script>
    <script src="../../js/theme.js" defer></script>
      <script src="../../search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
